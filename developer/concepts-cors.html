
---
title: 'CORS 이해하기'
description: '이 주제에서는 비디오, 이미지 및 스크립트와 같은 자산의 교차 출처 참조와 관련하여 웹에 구축된 CORS 및 제약 조건에 대해 학습합니다.'
parent: Developers
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="Overview">개요</h2>
    <p>CORS (교차 출처 리소스 공유) 는 웹 페이지가 제공된 도메인이 아닌 다른 도메인에 요청을 할 수 있도록 하는 메커니즘입니다. 일반적으로 교차 도메인 요청은 웹 브라우저에서 금지됩니다. CORS는 교차 출처 요청을 허용할지 여부를 결정하기 위해 도메인이 상호 작용할 수있는 방법을 정의합니다.</p>
    <aside class="bcls-aside bcls-aside--information">CORS는<strong> ~ 아니다</strong> Flash 응용 프로그램에 대한 교차 도메인 요청을 활성화하는 메커니즘인 crossdomain.xml에 의해 활성화되거나 이와 관련됩니다.</aside>
  </section>
  <section class="bcls-section">
    <h2 id="corsandbc">CORS 및 Brightcove</h2>
    <p>CORS를 Brightcove 서비스 / 제품과 함께 사용해야하는 세 가지 경우가 있습니다.</p>
    <ol>
      <li><strong>동영상 캡션</strong> : 비디오 캡션이 포함 된 파일은 비 Brightcove 도메인에 저장할 수 있습니다. 비디오 자체가 Brightcove 도메인에서 제공되므로 도메인 간 문제가 발생합니다.</li>
      <li><strong>브라이트코브 플레이어 및 HLS</strong> : <span class="video-cloud-only" translate="No">브라이트코브 플레이어의</span> HLS 플러그인은 AJAX 요청을 사용하여 HLS 비디오의 매니페스트 및 개별 세그먼트를 검색합니다. 이러한 HLS 리소스는 인터넷 액세스 가능한 모든 도메인에 저장 될 수 있으므로 이러한 리소스는 플레이어를 제공 한 Brightcove 도메인이 아닌 다른 서버 (일반적으로 CDN 도메인)에서 제공 될 가능성이 높습니다. 이것은 다시 도메인 간 문제를 일으킬 것입니다.</li>
      <li><strong>비디오 스틸 및 썸네일 이미지</strong> : 을위한<a href="https://studio.support.brightcove.com/media/capturing-poster-and-thumbnail-images.html"> Studio에서 비디오 스틸 및 썸네일 이미지 캡처</a> , 비디오 변환은 CORS 헤더와 함께 제공되어야 합니다(기본적으로 대부분의 Brightcove 하우스 CDN에서 활성화되어야 함). 사용자 정의 CDN이 있거나 아직 업데이트하지 않은 CDN이 있는 경우 이미지 캡처가 작동하지 않습니다.</li>
    </ol>
  </section>
  <section class="bcls-section">
    <h2 id="solution">솔루션</h2>
    <p>현재 브라이트코브가 사용하고 있는 솔루션에는 CDN 오리진 서버의 구성 파일에<code translate="No">Access-Control-Allow-Origin</code>헤더를 구성하는 작업이 포함됩니다. 서로 다른 CDN 파트너가 서로 다른 서버 솔루션을 사용하여 콘텐츠를 제공하기 때문에 아래 헤더 정보는 드롭 인 코드 스 니펫이 아닌 예제로 제공됩니다.</p>
    <p>Brightcove는 사내 CDN 서버의 속성에 대한 다음 헤더 지시문으로 성공했습니다.</p>
    <pre class="line-numbers">
<code class="language-apache" translate="No">&lt;FilesMatch ".(vtt|xml)$"&gt;
              Header set Access-Control-Allow-Headers: X-Requested-With
              Header add Access-Control-Allow-Origin: http://admin.brightcove.com
          &lt;/FilesMatch&gt;</code></pre>
    <p>다음은 지시문에 대한 간략한 설명을 제공합니다.</p>
    <ul>
      <li><code translate="No">&lt;FilesMatch ".(vtt|xml)$"&gt;</code>: 이 조건부는 vtt 또는 xml 파일에만<code translate="No">Access-Control-Allow-Origin</code>헤더를 설정합니다. 테스트 결과이 헤더가 이미지 또는 기타 http 제공 콘텐츠와 함께 전송되지 않음이 확인되었습니다.</li>
      <li><code translate="No">Header set Access-Control-Allow-Headers: X-Requested-With</code>: 이 헤더는 플레이어가 만드는 요청이 XMLHttpRequest이기 때문에<code translate="No">Access-Control-Allow-Origin</code>헤더가 작동하려면 필요합니다.</li>
      <li><code translate="No">Header add Access-Control-Allow-Origin: http://admin.brightcove.com</code>: 표시된 도메인의 콘텐츠를 허용하는 액세스 제어 헤더 자체입니다.</li>
    </ul>
    <h3>Apache에서 CORS 활성화</h3>
    <p>CORS를 사용하도록 Apache 서버 구성에서 헤더를 설정할 수 있습니다. 적절한<code translate="No">.conf</code>파일에 다음을 배치합니다.</p>
    <pre class="line-numbers">
<code class="language-bash" translate="No">Header set Access-Control-Allow-Origin "*"</code></pre>
    <p>위의 예에서 별표는 와일드 카드 역할을하며 모든 도메인에 대한 액세스를 허용합니다. 와일드카드는<strong>하나의</strong>특정 도메인으로 대체할 수도 있습니다. 많은 경우 자산이 여러 도메인에 상주하기 때문에 일반적으로 Brightcove 플레이어에게는 작동하지 않습니다. 허용 가능한 도메인의 특정 화이트리스트에 대한 액세스를 제한하는 다른 솔루션을 구현할 수 있습니다.</p>
    <h3>BYO CDN</h3>
    <p>BYO CDN이 있고 도메인 간 문제가있는 고객 인 경우 CDN에 문의하여 계정에 대한 CORS를 구성하는 데 도움을 받아야합니다. 권장하는 설정은 다음과 같습니다.</p>
    <ul>
      <li>액세스 제어 허용 헤더: X- 요청-함께</li>
      <li>액세스 제어 허용 출처: *</li>
      <li>파일 형식: m3u8 m3u TS XML dfxp vtt mpd m4f MP4 도트 jpg PNG</li>
    </ul>
    <h3>토큰 인증 요구 사항</h3>
    <p>토큰 인증이 필요한 경우 위의 솔루션을 변경해야합니다. 토큰 인증의 경우 CORS 보안 모델은<code translate="No">*</code>문자를<code translate="No">Access-Control-Allow-Origin</code>응답 값으로 사용하는 것을 특별히 허용하지 않습니다.헤더. 또한<code translate="No">Access-Control-Allow-Credentials</code>응답 헤더가 필요하며 true로 설정해야 합니다.</p>
    <p>토큰 인증을위한 업데이트 된 헤더 지시문은 다음과 같습니다.</p>
    <pre class="line-numbers">
<code class="language-apache" translate="No">&lt;FilesMatch ".(m3u8 | m3u | ts)$"&gt;
        # with AJAX withCredentials=true (cookies sent, SSL allowed...)
        SetEnvIfNoCase ORIGIN (.*) ORIGIN=$1
        Header set Access-Control-Allow-Origin "%{ORIGIN}e"
        Header set Access-Control-Allow-Credentials "true"
        RewriteEngine On
        RewriteCond %{REQUEST_METHOD} OPTIONS
        RewriteRule ^(.*)$ $1 [R=200,L,E=HTTP_ORIGIN:%{HTTP:ORIGIN}]
  &lt;/FilesMatch&gt;</code></pre>
    <p>다음 사항은 이전 솔루션과의 차이점을 자세히 설명합니다.</p>
    <ul>
      <li>지시어는 들어오는 요청에 Origin 헤더가 있는지 쿼리하고, 해당 헤더가 있는 경우 (보통) 값을<code translate="No">ORIGIN</code>다음과 같은 변수로 설정합니다. <code translate="No">SetEnvIfNoCase ORIGIN (.*) ORIGIN=$1</code></li>
      <li><code translate="No">Access-Control-Allow-Origin</code>응답 헤더 값은 방금 만든<code translate="No">ORIGIN</code>변수의 값으로 설정됩니다. <code translate="No">Header set Access-Control-Allow-Origin "%{ORIGIN}e"</code><aside class="bcls-aside bcls-aside--information"><code translate="No">e</code>이 변수가 환경 변수임을 나타내려면 가 필요합니다.</aside>
      </li>
      <li><code translate="No">Access-Control-Allow-Credentials</code>헤더는 다음과 같이 설정해야 합니다<code translate="No">true</code> . <code translate="No">Header set Access-Control-Allow-Credentials "true"</code></li>
    </ul>
  </section>
  <section class="bcls-section">
    <h2 id="hls">HLS 및 CORS</h2>
    <p>일부 환경 (예: Amazon S3) 에서는 HLS에 대한 CORS 구성을 지정할 수 있습니다. 다음은 HLS 재생을 허용하도록 CORS를 구성합니다.</p>
    <pre class="line-numbers">
<code class="language-apache" translate="No">&lt;CORSConfiguration&gt;
      &lt;CORSRule&gt;
      &lt;AllowedOrigin&gt;*&lt;/AllowedOrigin&gt;
      &lt;AllowedMethod&gt;GET&lt;/AllowedMethod&gt;
      &lt;/CORSRule&gt;
&lt;/CORSConfiguration&gt;</code></pre>
    <p>Amazon S3에 대한 자세한 내용은 교차 오리진 리소스 공유<a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/cors.html#how-do-i-enable-cors">활성화를 참조하십시오</a> .</p>
    <p>CORS에 접해 있지만 클라이언트 브라우저는 토큰 승인 HLS 콘텐츠 전달이 제대로 작동하기 위해 모든 세션 쿠키를 허용해야합니다. Google Chrome 및 Mozilla Firefox와 같은 일부 클라이언트 브라우저는 기본적으로 세션 쿠키를 허용하지만 Internet Explorer와 같은 다른 브라우저에서는 사용자가이 옵션을 활성화해야합니다.</p>
  </section>
</article>